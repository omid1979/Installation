Splunk docker Log Driver

# [دستورالعمل ارسال لاگ های داکر به اسپلانک با استفاده از log driver splunk](https://wiki.sadad.co.ir/pages/viewpage.action?pageId=65708724)

[Go to start of metadata](https://wiki.sadad.co.ir/pages/viewpage.action?pageId=65708724#page-metadata-start)

- ابتدا index و sourcetype مورد نیاز خود را در اسپلانک تعریف کنید.
- جهت ارسال لاگ های داکری با استفاده از log driver splunk ابتدا باید یک توکن در اسپلانک ساخته شود. برای ساخت توکن به اسپلانک مربوطه لاگین کرده و از طریق منوی setting قسمت Data Input وارد بخش HTTP Event Collector می شویم.
- در این بخش بر روی گزینه ی new Token کلیک کرده اطلاعات مربوط به index و sourcetype تعریف شده را وارد کنید ، نیازی به پر کردن بقیه موارد نمی باشد.
- با انجام مرحله ی قبل پورت 8088 بر روی سرور اسپلانک فعال خواهد شد ، سرور فرستنده لاگ می بایست به این پورت از سرور اسپلانک دسترسی داشته باشد.
- پس از برقراری دسترسی بر روی پورت 8088 می بایست فایل مربوط به compose پروژه ی داکری خود را باز کرده و خطوط زیر را به آن اضافه کنید ، سپس سرویس مربوطه را ریست نمائید:

`logging:`

`driver: splunk ==> مشخص کردن نوع درایور لاگ در داکر`

`options:`

`splunk-token: 458db36f-7b93-``4973``-``8521``-b6bcbd8216cb ==> توکن تعریف شده در مراحل قبل`

`splunk-url: https:``//172.29.140.3:8088 ==> آدرس اسپلانک مربوطه با پورت 8088`

`splunk-insecureskipverify:` `'true'` `==> عدم استفاده از پروتکل امن`

`splunk-source:` `192.168``.``161.138` `==> پر کردن فیلد ذکر شده با یک مقدار مورد نیاز`

- توجه داشته باشید پارامتر splunk-source اختیاری بوده و فقط جهت آدرس دهی بهتر لاگ ها در اسپلانک می باشد.
- پس از اضافه کردن کد های بالا در قسمت Data Summary اسپلانک در تب sources (به دلیل اینکه آدرس آی پی سرور را وارد کردیم) امکان مشاهده ی لاگ فرستاده شده وجود دارد.

![279007ffe8086131427d1d532344894a.png](:/8e1c7583782443a0bc15ff7acc384523)  

&nbsp;

id: 320a4b95b63042e99232c3dc3e5cc63c
parent_id: 2700abf6b5f5483881bd8b53cf358310
created_time: 2024-08-26T05:04:03.877Z
updated_time: 2024-08-26T05:05:36.243Z
is_conflict: 0
latitude: 35.68919750
longitude: 51.38897360
altitude: 0.0000
author: 
source_url: 
is_todo: 0
todo_due: 0
todo_completed: 0
source: joplin-desktop
source_application: net.cozic.joplin-desktop
application_data: 
order: 0
user_created_time: 2024-08-26T05:04:03.877Z
user_updated_time: 2024-08-26T05:05:36.243Z
encryption_cipher_text: 
encryption_applied: 0
markup_language: 1
is_shared: 0
share_id: 
conflict_original_id: 
master_key_id: 
user_data: 
deleted_time: 0
type_: 1