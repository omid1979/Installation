How to mount a qcow2 disk image

## How to mount a qcow2 disk image

```
modprobe nbd max_part=8
```

```
qemu-nbd --connect=/dev/nbd0 /var/lib/vz/images/100/vm-100-disk-1.qcow2
```

```
fdisk /dev/nbd0 -l
```

```
mount /dev/nbd0p1 /mnt/somepoint/
```

&nbsp;

```
umount /mnt/somepoint/
qemu-nbd --disconnect /dev/nbd0
rmmod nbd
```

**Resize :**Â 

qemu-img resize -f raw openwrt-\*.img 8G

This is a quick guide to mounting a qcow2 disk images on your host server. This is useful to reset passwords, edit files, or recover something without the virtual machine running.

**Step 1 - Enable NBD on the Host**

```
modprobe nbd max_part=8
```

**Step 2 - Connect the QCOW2 as network block device**

```
qemu-nbd --connect=/dev/nbd0 /var/lib/vz/images/100/vm-100-disk-1.qcow2
```

**Step 3 - Find The Virtual Machine Partitions**

```
fdisk /dev/nbd0 -l
```

**Step 4 - Mount the partition from the VM**

```
mount /dev/nbd0p1 /mnt/somepoint/
```

**Step 5 - After you done, unmount and disconnect**

```
umount /mnt/somepoint/
qemu-nbd --disconnect /dev/nbd0
rmmod nbd
```

id: 6c821731ebdb4b02bc3d5c0b1c994082
parent_id: 4e3f4a6801604b63b3326d6e21842ed6
created_time: 2024-09-03T04:00:06.037Z
updated_time: 2024-09-07T10:51:36.669Z
is_conflict: 0
latitude: 35.68919750
longitude: 51.38897360
altitude: 0.0000
author: 
source_url: 
is_todo: 0
todo_due: 0
todo_completed: 0
source: joplin-desktop
source_application: net.cozic.joplin-desktop
application_data: 
order: 0
user_created_time: 2024-09-03T04:00:06.037Z
user_updated_time: 2024-09-07T10:51:36.669Z
encryption_cipher_text: 
encryption_applied: 0
markup_language: 1
is_shared: 0
share_id: 
conflict_original_id: 
master_key_id: 
user_data: 
deleted_time: 0
type_: 1