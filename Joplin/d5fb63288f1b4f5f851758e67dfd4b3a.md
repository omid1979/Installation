id: d5fb63288f1b4f5f851758e67dfd4b3a
parent_id: 
item_type: 1
item_id: 38e11a2483f54fe39e156d970e3a345b
item_updated_time: 1723465043226
title_diff: "[{\"diffs\":[[1,\"نکات کار با اسپلانک \"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":20}]"
body_diff: "[{\"diffs\":[[1,\"![9a45a813fb691f7921cdc82f56053a0c.png](:/204afa4f8db64108955a4217e5cf80d5)\\\n\\\n&nbsp;\\\n\\\n\\\\*\\\\*نکات مربوط به کار با اسپلانک کلاستر  \\\n\\\\*\\\\*\\\n\\\n<span style=\\\"color: #244fa2;\\\">1-</span> \\\\*\\\\*لایه ی syslog  \\\n\\\\*\\\\*\\\n\\\n- برای مشاهده ی نحوه ی انتقال دیتا از سمت سرور های datacenter به splunk heavy forwarder با استفاده از دستور ipvsadm -Ln می توانید رول های مربوطه را مشاهده نمائید.\\\n- همچنین دستورات اجرا شده برای انتقال دیتا در فایل زیر ذخیره شده است.\\\n\\\n`/etc/sysconfig/ipvsadm`\\\n\\\n**<span style=\\\"color: #244fa2;\\\">2- لایه ی heavy forwarder  \\\n</span>**\\\n\\\n- <span style=\\\"color: #244fa2;\\\"><span style=\\\"color: #003366;\\\">تمامی data input های مربوط به اسپلانک بر روی این دو ماشین تعریف شده است ، برای تعریف یک data input جدید می بایست به مسیر زیر رفته و آن را به صورت دستی اضافه کنید، این کار را برای هر دو ماشین انجام دهید.</span></span>**<span style=\\\"color: #244fa2;\\\">  \\\n    </span>**\\\n\\\n`/opt/splunk/etc/system/local/inputs.conf`\\\n\\\n- توجه داشته باشید که فیلد index در لایه ی indexer ساخته می شود ، بنابراین در این مرحله در فایل مذکور فقط اسم مربوط به ایندکس را وارد نمائید.\\\n- عملیات مربوط به data masking هم در همین لایه انجام می شود ، برای انجام تغییرات می بایست به فایل زیر مراجعه کنید.\\\n\\\n`/opt/splunk/etc/system/local/props.conf`\\\n\\\n- پس از تغییر در هر کدام از ماشین ها سرویس splunk را ریست نمائید.\\\n- تنظیمات مربوط به انتقال دیتا به لایه ی indexer در فایل زیر قابل مشاهده است.\\\n\\\n`/opt/splunk/etc/system/local/outputs.conf`\\\n\\\n**<span style=\\\"color: #244fa2;\\\">3- لایه ی indexer</span>**\\\n\\\n- برای تعریف index جدید به سرور 172.29.132.6 مراجعه کرده و از طریق مسیر زیر به صورت دستی ایندکس مورد نظر خود را تعریف کنید.\\\n\\\n`/opt/splunk/etc/master-apps/_cluster/local/indexes.conf`\\\n\\\n- توجه داشته باشید که به هیچ وجه بر روی خود ایندکسر ها به صورت مستقیم ایندکس تعریف نشود ، تغییرات مربوط به ایندکس به وسیله ی master node انجام خواهد شد.\\\n- جهت اضافه کردن ایندکس جدید به فایل مذکور حتما گزینه ی repFactor = auto را درج نمائید مطابق مثال زیر:\\\n\\\n`[epayment_lb]`\\\n\\\n`repFactor = auto`\\\n\\\n`coldPath = $SPLUNK_DB/epayment_lb/colddb`\\\n\\\n`enableDataIntegrityControl =` `0`\\\n\\\n`enableTsidxReduction =` `0`\\\n\\\n`homePath = $SPLUNK_DB/epayment_lb/db`\\\n\\\n`maxTotalDataSizeMB =` `5242880`\\\n\\\n`thawedPath = $SPLUNK_DB/epayment_lb/thaweddb`\\\n\\\n`frozenTimePeriodInSecs =` `15552000`\\\n\\\n- توجه داشته باشید که مقادیر مربوط به size دیتابیس و مسیر های مربوط به آن را درست وارد کنید.\\\n- پس از این که index مربوطه را به صورت دستی تعریف کردید از طریق وب master node تغییرات را بر روی سه نود ایندکسر push می کنیم:\\\n\\\n`http:``//172.29.132.6:8000`\\\n\\\n`user : admin`\\\n\\\n`pass : *******`\\\n\\\n`----------------------`\\\n\\\n`- go to setting ==> indexer clustering ==> Edit ==> Configuration Bundle Action`\\\n\\\n`- click on Validate and check restart`\\\n\\\n`- then click on push`\\\n\\\n- پس از تعریف ایندکس جدید به محض ورود اولین داده می بایست ایندکس تعریف شده در منوی indexer clustering در tab مربوط به indexes قابل مشاهده باشد.\\\n\\\n**<span style=\\\"color: #244fa2;\\\">4- لایه ی search head  \\\n</span>**\\\n\\\n- <span style=\\\"color: #003366;\\\">در این لایه برای تعریف داشبورد می بایست داشبورد مورد نظر بر روی نود captain که یکی از سه نود کلاستر می باشد تعریف شود ، پس از تعریف ، این نود تغییرات را به صورت خودکار بر روی دو نود دیگر اعمال خواهد کرد.</span>**<span style=\\\"color: #244fa2;\\\">  \\\n    </span>**\\\n- <span style=\\\"color: #003366;\\\">برای استعلام اینکه کدام یکی از نود ها captain می باشد به یکی از نود ها لاگین کرده و دستور زیر را اجرا کنید.</span>\\\n\\\n`/opt/splunk/bin/splunk show shcluster-status -auth admin:<password>`\\\n\\\n- پسورد مربوطه برای همه ی نود های search head پسورد سرور 172.29.132.11 می باشد(همان الگوی پسوردی که برای سرور ها استفاده می کنیم).\\\n- برای دیپلوی کردن یک اپلیکیشن بر روی تمامی نود های search head به نود 172.29.132.10 لاگین کرده و مراحل زیر را انجام دهید:\\\n\\\n`- download the app from splunk site`\\\n\\\n`-unzip the app`\\\n\\\n`- copy the app to` `172.29``.``132.10` `==> /opt/splunk/etc/shcluster/apps`\\\n\\\n`- on` `172.29``.``132.10` `run` `this` `command:`\\\n\\\n`/opt/splunk/bin/splunk apply shcluster-bundle -target https:``//172.29.132.12:8089 -auth admin:<password>`\\\n\\\n- پسورد ذکر شده در بالا همان پسورد سرور 172.29.132.10 می باشد.\\\n- توجه داشته باشید در گزینه ی target فقط یکی از نود ها قرار می دهیم deployer به صورت خودکار بر روی تمامی نود ها application مورد نظر را نصب خواهد کرد.\\\n- برای دسترسی به لایه ی search head از url زیر استفاده کنید.\\\n\\\n`https:``//log.bmi.net`\"]],\"start1\":0,\"start2\":0,\"length1\":0,\"length2\":4232}]"
metadata_diff: {"new":{"id":"38e11a2483f54fe39e156d970e3a345b","parent_id":"2700abf6b5f5483881bd8b53cf358310","latitude":"35.68919750","longitude":"51.38897360","altitude":"0.0000","author":"","source_url":"","is_todo":0,"todo_due":0,"todo_completed":0,"source":"joplin-desktop","source_application":"net.cozic.joplin-desktop","application_data":"","order":0,"markup_language":1,"is_shared":0,"share_id":"","conflict_original_id":"","master_key_id":"","user_data":"","deleted_time":0},"deleted":[]}
encryption_cipher_text: 
encryption_applied: 0
updated_time: 2024-08-12T12:22:29.690Z
created_time: 2024-08-12T12:22:29.690Z
type_: 13