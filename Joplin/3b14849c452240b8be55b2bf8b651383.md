Ansible AWX

# [install AWX on docker](https://wiki.sadad.co.ir/display/Linux/install+AWX+on+docker)

این مستند ابزار awx با استفاده از انسیبل و داکر پیاده سازی می کند.

1- برای شروع کار ابتدا پکیج های زیر نصب شود :

`yum install update`

`yum install -y ansible python-devel python-pip bzip2 gcc-c++`

`yum install docker-ce docker-ce-cli containerd.io`

`systemctl start docker`

`systemctl enable docker`

`pip install --upgrade pip`

`pip install docker-compose`

`pip install docker-py`

2- کلون گرفتن از پروژه ی git :

`git clone https:``//github.com/ansible/awx.git`

3- برای اجرای پروژه به image های زیر نیاز دارید:

`redis:latest`

`postgres:``10`

`ansible/awx:``16.0``.``0`

4- تنظیم پارمتر های ورودی:

`in awx/installer/inventory:`

`check` `this` `parameters ==>`

`dockerhub_base=ansible`

`awx_task_hostname=awx`

`awx_web_hostname=awxweb`

`postgres_data_dir=``"~/.awx/pgdocker"`

`host_port=``80`

`host_port_ssl=``443`

`docker_compose_dir=``"~/.awx/awxcompose"`

`pg_username=awx`

`pg_password=awxpass`

`pg_database=awx`

`pg_port=``5432`

`pg_admin_password=postgrespass`

`admin_user=admin`

`admin_password=password`

`create_preload_data=True`

`secret_key=awxsecret`

`awx_official=``true`

`project_data_dir=/var/lib/awx/projects`

نکته : پارامتر secret_key برای encrypt کردن inventory داخل awx می باشد می توانید با یکی از ابزار های مورد دلخواه یک رشته پسورد دلخواه تولید کنید و یا در صورت عدم نیاز همان مقدار جدول بالا را جلوی آن وارد کنید.

5- اجرای انسیبل پروژه :

`ansible-playbook -i /opt/awx/installer/inventory /opt/awx/installer/install.yml`

6- پس از اتمام انسیبل بالا در مسیر زیر فایل مربوط به کامپوز awx ساخته شده و هم چنین پروژه می بایست در حال اجرا باشد :

`/root/.awx/awxcompose/`

همچنین در مسیر بالا فایل های مربوط به تنظمیات دیتابیس ، env ، redis و secret_key نیز وجود دارد که می توانید از این فایل ها برای تغییر تنظمیات استفاده کنید.

id: 3b14849c452240b8be55b2bf8b651383
parent_id: 6df7a667a12643adb75aab7021873500
created_time: 2024-08-26T05:01:38.341Z
updated_time: 2024-08-26T05:02:00.345Z
is_conflict: 0
latitude: 35.68919750
longitude: 51.38897360
altitude: 0.0000
author: 
source_url: 
is_todo: 0
todo_due: 0
todo_completed: 0
source: joplin-desktop
source_application: net.cozic.joplin-desktop
application_data: 
order: 0
user_created_time: 2024-08-26T05:01:38.341Z
user_updated_time: 2024-08-26T05:02:00.345Z
encryption_cipher_text: 
encryption_applied: 0
markup_language: 1
is_shared: 0
share_id: 
conflict_original_id: 
master_key_id: 
user_data: 
deleted_time: 0
type_: 1