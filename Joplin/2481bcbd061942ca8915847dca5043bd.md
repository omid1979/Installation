عیب یابی اسپلانک 

در این مستند برخی از نکات مربوط به اسپلانک در مواقعی که به مشکل میخوریم بیان شده است.

**<span style="color: #ff0000;">نکته : تمامی نکات ذکر شده با این پیش فرض می باشد که از اسپلانک بکاپ داشته باشیم.</span>**

- پیشنهاد می شود به صورت دوره ای از کل دایرکتوری اسپلانک مورد نظر بکاب تهیه گردد ، به دلیل اینکه در صورت عدم دسترسی به داده ها و یا از بین رفتن آن ها بتوان اطلاعات مربوطه را بازگرداند.
- در صورتی که تعاریف ایندکس های موجود در اسپلانک از دست رفت در مسیر زیر می توانید فایل بکاپ خود را قرار دهید.

`/opt/splunk/etc/system/local/indexes.conf`

- در صورتی که تعاریف مربوط به داده های ورودی از بین رفت در مسیر زیر می توانید فایل بکاپ خود را قرار دهید.

`/opt/splunk/etc/system/local/inputs.conf`

- در صورتی که داده های ایندکس شده از دست رفت مسیر مربوط به داده ها به شکل زیر می باشد .

`/opt/splunk/var/lib/splunk`

- در صورتی که add on های اضافه شده به اسپلانک از دست رفت می بایست فایل های مورد نظر در این مسیر قرار گیرد .

`/opt/splunk/etc/apps`

- در صورتی که data masking با مشکل مواجه شد و یا از دست رفت می توانید فایل بکاپ گرفته شده را در مسیر زیر قرار دهید .

`/opt/splunk/etc/system/local/props.conf`

- توجه داشته باشید برای مدیریت ایندکس هایی که ممکن است در آینده حجم بالایی داشته باشند براساس policy مد نظر گروه از پارامترهای زیر استفاده کنید .

`maxTotalDataSizeMB`

`frozenTimePeriodInSecs`

`maxHotSpanSecs`

- <span style="color: #339966;">maxTotalDataSizeMB : این پارامتر حداکثر میزان دیتای یک ایندکس قبل از این که به دیتابیس frozen منتقل شود را تعیین می کند ، در صورتی که حجم دیتای ایندکس شده به میزان تعیین شده در این پارامتر برسد قدیمی ترین bucket در دیتابیس cold به frozen منتقل خواهد شد و غیر قابل جستجو خواهد بود.</span>
    
- <span style="color: #339966;">frozenTimePeriodInSecs : این پارامتر براساس ثانیه میزان زمانی که ایندکس مدنظر اجازه نگهداری دیتا را مشخص می کند به عنوان مثال در صورتی که می خواهید دیتا مورد نظر به مدت 37 روز نگهداری شود عدد 37 را به ثانیه تبدیل کرده و برای ایندکس مورد نظر این پارامتر را set کنید.</span>
    
- <span style="color: #339966;">maxHotSpanSecs : از این پارامتر برای کار با ایندکس های بسیار بزرگ استفاده می شود و زمان انتقال دیتاها به دیتابیس warm را مشخص خواهد کرد(این پارامتر براساس ثانیه کار می کند) ، در اسپلانک تعداد bucket های اختصاص یافته در دیتابیس hot به میزان مشخصی می باشد ، در صورتی که دیتا های وارد شده به ایندکس مورد نظر از 50 یا 75 درصد bucket های تخصیص یافته بیشتر باشد در عملکرد ایندکس گذاری تاثیر گذار خواهد بود ، لذا تنظیم مقدار این پارامتر بسیار مهم می باشد ، چون اگر میزان کمی برای آن در نظر بگیرید منابع سرور به طور کامل اشغال خواهد شد ، بنابراین اولا این پارامتر زمانی استفاده شود که با داده های بسیار بزرگ سرکار دارید و دوما مقدار این پارامتر را براساس فرمول روبرو تعیین کنید : **<span style="color: #ff0000;">frozenTimePeriodInSecs + maxHotSpanSecs = میزان کل زمان نگهداری</span>**</span>
    
- **توجه داشته باشید برای اعمال لایسنس بر روی اسپلانک حتما از یک سرور جدا برای license management استفاده کنید ، به این دلیل که چون اسپلانک ها با هم در ارتباط هستند خطای duplicate license به شما داده و نهایتا تا 72 ساعت اجازه جستجو بر روی ایندکس ها را به شما می دهد. بنابراین در قسمت licenseing حتما از گزینه ی remote master license serverاستفاده کنید.**

id: 2481bcbd061942ca8915847dca5043bd
parent_id: 2700abf6b5f5483881bd8b53cf358310
created_time: 2024-08-12T12:12:44.682Z
updated_time: 2024-08-12T12:13:28.788Z
is_conflict: 0
latitude: 35.68919750
longitude: 51.38897360
altitude: 0.0000
author: 
source_url: 
is_todo: 0
todo_due: 0
todo_completed: 0
source: joplin-desktop
source_application: net.cozic.joplin-desktop
application_data: 
order: 0
user_created_time: 2024-08-12T12:12:44.682Z
user_updated_time: 2024-08-12T12:13:28.788Z
encryption_cipher_text: 
encryption_applied: 0
markup_language: 1
is_shared: 0
share_id: 
conflict_original_id: 
master_key_id: 
user_data: 
deleted_time: 0
type_: 1